# Notes

1. Does Pyre preserve the order of component attributes? That is, does `cls.pyre_localTraits()` preserve order?

2. Within the `pylith` package, should I only use relative imports to prevent circular imports?

   ```python
   # Full path
   from pylith.materials import elasticity

    # Relative path
   from ..materials import elasticity
  ```

3. Should I import everything in `__init__.py` or just the files in the local directory (not the subdirectories)?

4. Journal still seems to be using just application as the tag, not application (channel). I could not find this update in the journal PR.

5. How do I get "colored" journal output on macOS?

6. What is a good "Pyre" way to organize components based on physics?

  Elasticity, incompressible elasticity, and poroelasticity each have auxiliary subfields, derived subfields, and solver options.
  
    Grouped by physics with containers in same file.

    I like this approach because it is clear which files need to be added when implementing a new governing equation or bulk rheology.
    It is also relatively compact and filenames are unique.

    ```
    pylith/materials
      Elasticity.py (Elasticity, AuxiliarySubfields, DerivedSubfields)
      IncompressibleElasticity.py
      Poroelasticity.py
    pylith/materials/elasticity_rheologies
      IsotropicLinear.py (IsotropicLinear, AuxiliarySubfields, DerivedSubfields)
    ```
  
    Grouped by physics with containers in separate files.

    ```
    pylith/materials
      Material.py
    
    pylith/materials/elasticity (Material has auxiliary_subfields, derived_subfields)
      Material.py (family=pylith.materials.elasticity.material)  
      BulkRheology.py (protocol=pylith.materials.elasticity.bulk_rheology)
      AuxiliarySubfields.py (family=pylith.materials.elasticity.auxiliary_subfields)
      DerivedSubfields.py (family=pylith.materials.elasticity.derived_subfields)
    pylith/materials/elasticity/isotropic_linear
      BulkRheology.py (family=pylith.materials.elasticity.isotropic_linear)
      AuxiliarySubfields.py (family=pylith.materials.elasticity.isotropic_linear.auxiliary_subfields)
      DerivedSubfields.py (family=pylith.materials.elasticity.isotropic_linear.derived_subfields)
    ```
  
    Grouped by physics amd component type.

    ```
    pylith/materials
      Elasticity.py
      IncompressibleElasticity.py
      Poroelasticity.py
    pylith/materials/auxiliary_subfields
      Elasticity.py
      IncompressibleElasticity.py
      Poroelasticity.py
    pylith/materials/derived_subfields
      Elasticity.py
      IncompressibleElasticity.py
      Poroelasticity.py
    pylith/materials/elasticity_rheologies
      IsotropicLinear.py
    pylith/materials/elasticity_rheologies/auxiliary_subfields
      IsotropicLinear.py
    pylith/materials/elasticity_rheologies/derived_subfields
      IsotropicLinear.py
    ```
  
7. What is the best way to provide defaults for a component based on its family name? What is required for this to work? Does `import pylith` need to provide `pylith.governing_eqns.elasticity` or can it be imported using`import pylith.governing_eqns.elasticity`?

    ```python
    class Elasticity(pylith.component, implements=GoverningEqn, family="pylith.governing_eqns.elasticity"):

        solver = solver(default=solver_elasticity_nofault)
    ```

    Parameters using component hierarchy:

    ```yaml
    pylith.app.problem.governing_eqn.solver:
        petsc_options:
            solver:
                - pc_type: gamg
    ```

    Parameters using family name (only works in some cases)

    ```yaml
    pylith.governing_eqns.elasticity:
        solver.petsc_options.solver:
            - pc_type: gamg
    ```

8. Is naming a component supposed to override settings via the hierarchy:

    ```yaml
    # Parameters via hierarchy
    pylith.app.problem.governing_eqn.solver.petsc_options:
      initial_guess:
        enabled: True
        options:
          - ksp_guess_type, pod
          - ksp_guess_pod_size,  8

    # This prevents the above settings from being used.
    pylith.app:
      problem: pylith.problems.time_dependent#static_problem
    ```

9. `mm` does not appear to be building the Pyre mpi package. I have MPI installed in `/software/baagaard/openmpi-5.0/gcc-11.4/`.
